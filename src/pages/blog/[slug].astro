---
import { getCollection } from 'astro:content'

// Match current slug from the URL to a post if it exists
const { slug } = Astro.params
const pages = await getCollection('blog')
const post = pages.find((p) => p.slug === slug)

// If the post doesn't exist, redirect to 404
if (!post) {
  return Astro.redirect('/404')
}

const { Content } = await post.render()
---

<Content />
