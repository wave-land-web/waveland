---
import { Icon } from 'astro-icon/components'

const icons = [
  'moonbelly-makes',
  'aaa',
  'supervoid',
  'church-dwight',
  'born-yesterday-bakery',
  'la-roche-posay',
  'robby-webb',
  'loreal',
  'pmi',
]
---

<div class="marquee-wrapper container md:max-w-screen-3xl">
  <div class="marquee">
    <div class="marquee-content">
      {icons.map((icon) => <Icon name={icon} />)}
    </div>
    <div class="marquee-content" aria-hidden="true">
      {icons.map((icon) => <Icon name={icon} />)}
    </div>
  </div>
</div>

<style>
  .marquee-wrapper {
    --gap: clamp(4rem, 10vw, 6rem);
    --duration: 30s;
    padding: 4rem 0;
    margin: 0 auto;
    overflow: hidden;
    mask-image: linear-gradient(
      to right,
      transparent,
      var(--color-black) 20%,
      var(--color-black) 80%,
      transparent
    );
    -webkit-mask-image: linear-gradient(
      to right,
      transparent,
      var(--color-black) 20%,
      var(--color-black) 80%,
      transparent
    );
  }

  .marquee {
    display: flex;
    overflow: hidden;
    user-select: none;
    gap: var(--gap);
  }

  .marquee-content {
    flex-shrink: 0;
    display: flex;
    justify-content: space-around;
    gap: var(--gap);
    min-width: 100%;
    animation: scroll var(--duration) linear infinite;
  }

  @media (prefers-reduced-motion: reduce) {
    .marquee-content {
      animation-play-state: paused;
    }
  }

  .marquee-content [data-icon] {
    display: grid;
    place-items: center;
    width: clamp(75px, 10vw, 100px);
    height: clamp(75px, 10vw, 100px);
    flex-shrink: 0;
    object-fit: contain;
  }

  @keyframes scroll {
    from {
      transform: translateX(0);
    }
    to {
      transform: translateX(calc(-100% - var(--gap)));
    }
  }
</style>
